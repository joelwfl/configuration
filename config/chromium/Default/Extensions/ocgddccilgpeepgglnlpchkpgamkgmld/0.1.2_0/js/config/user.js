define(["backbone","constants","server/auth"],function(f,g,e){return function(){e.getUserName(function(a){this.userId=a}.bind(this));this.setUserValue=function(a,b,d){var c={};c[a+"_"+this.userId]=JSON.stringify(b);window.storage.set(c,function(){"function"==typeof d&&d()})};this.getUserValue=function(a,b,d){a=a+"_"+this.userId;if("undefined"==typeof d){var c=userValues[a];return c="undefined"!=typeof c?JSON.parse(c):b}storage.get(a,function(c){c&&c[a]&&"undefined"!=typeof c[a]?d(JSON.parse(c[a])):
d(b)})};this.setView=function(a,b){this.setUserValue(CONFIG_VIEW_BY,a,b)};this.getView=function(){return this.getUserValue(CONFIG_VIEW_BY,DEFAULT_VIEW_BY)};this.setCollapsedCategories=function(a,b){this.setUserValue(CONFIG_COLLAPSED_CATEGORIES,a,b)};this.getCollapsedCategories=function(){this.getUserValue(CONFIG_COLLAPSED_CATEGORIES,[])};this.setCalendarDay=function(a,b){this.setUserValue(CONFIG_CALENDAR_DAY,a,b)};this.getCalendarDay=function(){var a=navigator.language.split("-")[1],b=2;try{var d=
"AS,AZ,BW,CA,CN,FO,GE,GL,GU,HK,IE,IL,IN,IS,JM,JP,KG,KR,LA,MH,MN,MO,MP,MT,NZ,PH,PK,SG,SY,TH,TT,TW,UM,US,UZ,VI,ZW,ET,MW,NG,TJ,GB".split(",");-1<"AF,BH,DJ,DZ,EG,ER,ET,IQ,IR,JO,KE,KW,LY,MA,OM,QA,SA,SD,SO,TN,YE".split(",").indexOf(a)?b=7:-1<d.indexOf(a)&&(b=1)}catch(c){console.error(c)}return this.getUserValue(CONFIG_CALENDAR_DAY,b)};this.setGmailActive=function(a){this.setUserValue(GMAIL_ACTIVE,a)};this.getGmailActive=function(){var a=this.getUserValue(GMAIL_ACTIVE);"undefined"===typeof a&&(a=!0,this.setUserValue(GMAIL_ACTIVE,
!0));return a}}});